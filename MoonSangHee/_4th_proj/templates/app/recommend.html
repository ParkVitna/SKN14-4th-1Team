{% extends "layout/base.html" %}
{% load static %}

{% block title %}ì˜ì–‘ì œ ì¶”ì²œë°›ê¸° Â· NutriWise{% endblock %}
{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/recommend.css' %}">
{% endblock %}

{% block content %}
  <!-- ì¤‘ì•™ ì •ë ¬ ë˜í¼ -->
  <section class="chat-wrap">
    <section class="chat" aria-label="ì˜ì–‘ì œ ì¶”ì²œ ì±—ë´‡">
      <div class="chat_scroll" id="chat-scroll">
        <div class="msg msg--bot">
          <div class="avatar">ğŸŒ¿</div>
          <div class="bubble">
            ì•ˆë…•í•˜ì„¸ìš”! ê±´ê°• ëª©í‘œë‚˜ ì¦ìƒì„ ì•Œë ¤ì£¼ì‹œë©´ ë§ì¶¤ ì˜ì–‘ì œë¥¼ ì¶”ì²œí•´ ë“œë¦´ê²Œìš”. <br>
            ë§ˆì´í˜ì´ì§€ì— ì…ë ¥ëœ ê¸°ë³¸ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¶”ì²œí•´ ë“œë¦½ë‹ˆë‹¤. <br>
            ë³€ê²½ëœ ì‚¬í•­ì€ ì–¸ì œë“ ì§€ ë§ˆì´í˜ì´ì§€ì—ì„œ ë³€ê²½ ê°€ëŠ¥í•´ìš”. <br>
            ì˜ˆ) â€œí”¼ê³¤í•´ì„œ ì˜¤í›„ì— ì§‘ì¤‘ì´ ì•ˆ ë¼ìš”â€, â€œìˆ˜ë©´ì˜ ì§ˆì„ ë†’ì´ê³  ì‹¶ì–´ìš”â€
          </div>
        </div>

      <!-- ì…ë ¥ì°½ -->
      <form class="composer" id="composer" autocomplete="off">
        <input type="text" id="prompt" class="composer__input"
               placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”â€¦ (ì˜ˆ: ìµœê·¼ í˜ˆì•¡ê²€ì‚¬ì—ì„œ ë¹„íƒ€ë¯¼D ë‚®ì•˜ì–´ìš”)">
        <button type="submit" class="cta">ë³´ë‚´ê¸°</button>
      </form>
    </section>
  </section>
{% endblock %}

{% block extra_body %}
<script>
  const composer = document.getElementById('composer');
  const scrollBox = document.getElementById('chat-scroll');
  const typing = document.getElementById('typing');

  function addMsg(role, text){
    const wrap = document.createElement('div');
    wrap.className = 'msg ' + (role === 'user' ? 'msg--user' : 'msg--bot');
    wrap.innerHTML = `<div class="avatar">${role==='user'?'ğŸ™‚':'ğŸŒ¿'}</div><div class="bubble">${text}</div>`;
    scrollBox.appendChild(wrap);
    scrollBox.scrollTop = scrollBox.scrollHeight;
  }

  composer.addEventListener('submit', (e)=>{
    e.preventDefault();
    const input = document.getElementById('prompt');
    const text = input.value.trim();
    if(!text) return;
    addMsg('user', text);
    input.value = '';
    typing.hidden = false;
    scrollBox.scrollTop = scrollBox.scrollHeight;

    setTimeout(()=>{
      typing.hidden = true;
      addMsg('bot', 'ì•Œê² ìŠµë‹ˆë‹¤. í•´ë‹¹ ì •ë³´ë¥¼ ë°˜ì˜í•´ ì¶”ì²œ ë¦¬ìŠ¤íŠ¸ë¥¼ ì¤€ë¹„í• ê²Œìš”.');
    }, 900);
  });
</script>
{% endblock %}

