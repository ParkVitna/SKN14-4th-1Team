{% extends "layout/base.html" %}
{% load static %}

{% block title %}ì˜ì–‘ì œ ê²€ìƒ‰í•˜ê¸° Â· NutriWise{% endblock %}
{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/search.css' %}">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
{% endblock %}

{% block content %}
<section class="nw-search container mt-5">
  <h1 class="nw-search__title text-center mb-4">ì›í•˜ëŠ” ì˜ì–‘ì œë¥¼ ê²€ìƒ‰í•´ë³´ì„¸ìš”</h1>

  <!-- ğŸ” ê¸°ì¡´ ê²€ìƒ‰ë°” ìœ ì§€ -->
  <form action="#" method="post" enctype="multipart/form-data" class="nw-search__form mb-5">
    {% csrf_token %}
    <input type="text" name="q" class="nw-search__input" placeholder="ì œí’ˆëª… / ì„±ë¶„ / ë¸Œëœë“œë¡œ ê²€ìƒ‰" value="{{ request.GET.q }}">
    
    <!-- ì´ë¯¸ì§€/ì¹´ë©”ë¼ ì—…ë¡œë“œ -->
    <label class="nw-search__btn nw-search__btn--icon" title="ì´ë¯¸ì§€ë¡œ ê²€ìƒ‰">
      <input type="file" name="image" accept="image/*" class="nw-search__file" onchange="this.form.submit()">
      ğŸ“·
    </label>

    <button type="submit" class="nw-search__btn nw-search__btn--primary">
      ğŸ” ê²€ìƒ‰
    </button>
  </form>

    <!-- ê²°ê³¼ ì¶œë ¥ -->
    {% if response_list or image_url %}
    <div class="row mt-5">
      <!-- ì™¼ìª½: ì—…ë¡œë“œ ì´ë¯¸ì§€ -->
      <div class="col-md-4">
        {% if image_url %}
        <div class="card mb-4 shadow-sm">
          <div class="card-header text-center fw-semibold">ğŸ“¸ ì—…ë¡œë“œí•œ ì´ë¯¸ì§€</div>
          <img src="{{ image_url }}" alt="ì—…ë¡œë“œ ì´ë¯¸ì§€" class="card-img-top" style="max-height: 300px; object-fit: contain;">
        </div>
        {% endif %}
      </div>

      <!-- ì˜¤ë¥¸ìª½: ì¶”ì²œ ê²°ê³¼ -->
      <div class="col-md-8">
        {% if response_list %}
        <h5 class="mb-3 text-success fw-bold">ğŸ§¾ ê²€ìƒ‰ ê²°ê³¼</h5>
        {% for item in response_list %}
          <div class="card mb-4 shadow-sm">
            <div class="card-body">
              <h6 class="card-title text-primary fw-semibold">ğŸ“¦ {{ item.name }}</h6>
              <pre class="card-text" style="white-space: pre-wrap;">{{ item.detail }}</pre>
            </div>
          </div>
        {% endfor %}
        {% endif %}
      </div>
    </div>
    {% endif %}

  <!-- ì¸ê¸° ê²€ìƒ‰ì–´ -->
  <div class="nw-search__meta mt-5">
    <span class="tag">ë¹„íƒ€ë¯¼D</span>
    <span class="tag">ì˜¤ë©”ê°€3</span>
    <span class="tag">ë§ˆê·¸ë„¤ìŠ˜</span>
  </div>
</section>
{% endblock %}


